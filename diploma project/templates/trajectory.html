{% extends "base.html" %}
{% block title %}Траєкторія{% endblock %}

{% block content %}
<h3>Траєкторія студента: {{ student.name }}</h3>
<p><b>Семестр:</b> {{ semester }}</p>

<div class="card">
  <p><b>Прогноз:</b> {{ "%.3f"|format(p_adjusted) if p_adjusted is not none else "—" }}</p>
  <p><b>Ризик:</b> {{ rec.risk_level }}</p>
</div>

<div class="card">
  <h4>Поточний план</h4>
  <ul>
    {% for p in plan %}
      <li>
        {{ p.name }} ({{ p.status }})
        <form method="POST" action="{{ url_for('trajectory_remove', student_id=student.id) }}" style="display:inline;">
          <input type="hidden" name="semester" value="{{ semester }}">
          <input type="hidden" name="course_id" value="{{ p.course_id }}">
          <button type="submit">Видалити</button>
        </form>
      </li>
    {% else %}
      <li><i>План порожній</i></li>
    {% endfor %}
  </ul>
</div>

<div class="card">
  <h4>Рекомендовано</h4>
  <ul>
    {% for c, reason in rec.optimal %}
      <li>
        <b>{{ c.name }}</b> — {{ reason }}
        <form method="POST" action="{{ url_for('trajectory_add', student_id=student.id) }}" style="display:inline;">
          <input type="hidden" name="semester" value="{{ semester }}">
          <input type="hidden" name="course_id" value="{{ c.id }}">
          <button type="submit">Додати</button>
        </form>
      </li>
    {% else %}
      <li><i>Немає рекомендацій</i></li>
    {% endfor %}
  </ul>
</div>

<div class="card">
  <h4>Обережно</h4>
  <ul>
    {% for c, reason in rec.cautious %}
      <li>{{ c.name }} — <i>{{ reason }}</i></li>
    {% else %}
      <li><i>Немає</i></li>
    {% endfor %}
  </ul>
</div>
{% endblock %}
